<!-- Creator     : groff version 1.23.0 -->
<!-- CreationDate: Mon Feb 16 10:19:05 2026 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>LCOLLECT</title>

</head>
<body>

<h1 align="center">LCOLLECT</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#COMMON OPTIONS">COMMON OPTIONS</a><br>
<a href="#SPECIFIC OPTIONS">SPECIFIC OPTIONS</a><br>
<a href="#EXIT STATUS">EXIT STATUS</a><br>
<a href="#EXAMPLES">EXAMPLES</a><br>
<a href="#FILES">FILES</a><br>
<a href="#NOTES">NOTES</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#COPYRIGHT">COPYRIGHT</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">lcollect -
remove obsolete files and dirs</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em"><b>lcollect</b>
[<i>OPTION</i>]... [<i>FILE</i>]...</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">While
<i>open-lmake</i> is used and the repo evolves, new files
are generated and some files become obsolete. But these
obsolete files are not removed from disk and after a while,
this may occupy a substantial disk space. <b>lcollect</b>
can be used to remove all such files.</p>

<p style="margin-left:9%; margin-top: 1em"><b>lcollect</b>
works by walking through the dirs and files passed as
argument and decide for each of them whether to keep,
quarantine or remove them.</p>

<p style="margin-left:9%; margin-top: 1em">Files ignored as
specified in <b>lmake.config.collect</b> are kept, though.
This is particularly useful if files are generated with the
<b>ignore</b> flag, in which case <i>open-lmake</i> does not
see they have been generated and <b>lcollect</b> would
consider them as foreign files to be quarantined.</p>

<p style="margin-left:9%; margin-top: 1em"><b>lcollect</b>
is harmless: only files generated by <i>open-lmake</i> are
removed. If a file is determined as useless but it is not
sure that it was generated by an old job, it is quarantined
(i.e. it is moved to the <i>LMAKE/quarantine</i> dir)
instead of being removed. It is is then easy to execute
<b>rm -rf LMAKE/quarantine</b> if such a backup is not
desirable.</p>

<p style="margin-left:9%; margin-top: 1em"><b>lcollect</b>
manages a fully coherent dir called a repo. When it starts,
it first determines the root of the repo (cf. <b>FILES</b>
below).</p>

<p style="margin-left:9%; margin-top: 1em">Arguments and
reports are systematically localized to the current working
dir. For example, if you launch <b>lcollect b</b> from dir
<b>a</b> in your repo, the argument is file <i>a/b</i> from
the root of the repo and reports containing filenames
(initially seen from the root of the repo) will be shown
relative the the current working dir.</p>

<h2>COMMON OPTIONS
<a name="COMMON OPTIONS"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">These options
are common to all tools of the <i>open-lmake</i> set of
utilities : <b><br>
--version</b></p>

<p style="margin-left:18%;">Print version and exit. Version
is in the form &quot;year.month.tag (key)&quot; where
&quot;year.month&quot; forms the major version,
&quot;tag&quot; the minor version and &quot;key&quot; is
indicates the format of the persistent information.</p>

<p style="margin-left:9%;"><b>-h</b>, <b>--help</b></p>

<p style="margin-left:18%;">Print a short help and exit. It
is composed of:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="8%"></td>
<td width="73%">


<p>The command line synoptic.</p></td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="8%"></td>
<td width="73%">


<p>Version as described above.</p></td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="8%"></td>
<td width="73%">


<p>A line for each supported option with its short name,
long name, whether it has an argument and a short
explanation.</p> </td></tr>
</table>

<p style="margin-left:9%;"><b>-q</b>, <b>--quiet</b></p>

<p style="margin-left:18%;">Do not generate user oriented
messages. Strictly generate what is asked. This is practical
if output is meant for automatic processing.</p>

<p style="margin-left:9%;"><b>-S</b>, <b>--sync</b></p>

<p style="margin-left:18%;">Ensure server is launched (i.e.
do not connect to an existing server) and wait for its
termination. This is exceptionally useful in scripts that
modify <i>Lmakefile.py</i>.</p>

<p style="margin-left:9%;"><b>-v</b>, <b>--verbose</b></p>

<p style="margin-left:18%;">Generate more prolix
output.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="5%">


<p><b>-.nf</b></p></td>
<td width="86%">
</td></tr>
</table>

<p style="margin-left:18%; margin-top: 1em">Explicitly ask
for a video mode instead of interrogating connected
terminal. If mode starts with <b>n</b> or <b>N</b>, normal
video (black on white) is assumed. If it starts with
<b>r</b> or <b>R</b>, reverse video (white on black) is
assumed. Else output is not colorized. video mode has an
impact on generated colors as nice looking colors are not
the same in each case.</p>

<h2>SPECIFIC OPTIONS
<a name="SPECIFIC OPTIONS"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">These options
are specific to <b>lcollect</b> : <b><br>
-n</b>, <b>--dry-run</b></p>

<p style="margin-left:18%;">report only, dont actually
execute actions.</p>

<h2>EXIT STATUS
<a name="EXIT STATUS"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em"><b>lcollect</b>
exits with a status of zero if the whole process went out
smoothly. Else it exits with a non-zero status:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="3%">


<p><b>2</b></p></td>
<td width="6%"></td>
<td width="82%">


<p>internal error, should not occur</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="3%">


<p><b>3</b></p></td>
<td width="6%"></td>
<td width="82%">


<p><i>Lmakefile.py</i> could not be read or contained an
error</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="3%">


<p><b>4</b></p></td>
<td width="6%"></td>
<td width="82%">


<p>server could not be started</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="3%">


<p><b>5</b></p></td>
<td width="6%"></td>
<td width="82%">


<p>internal repo state was inconsistent</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="3%">


<p><b>6</b></p></td>
<td width="6%"></td>
<td width="82%">


<p>repo need to be cleaned, e.g. with <b>git clean
-ffdx</b></p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="3%">


<p><b>7</b></p></td>
<td width="6%"></td>
<td width="82%">


<p>adequate permissions were missing, typically write
access</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="3%">


<p><b>8</b></p></td>
<td width="6%"></td>
<td width="82%">


<p>server crashed, should not occur</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="3%">


<p><b>9</b></p></td>
<td width="6%"></td>
<td width="82%">


<p>repo need to be steady (no on-going lmake running)</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="3%">


<p><b>10</b></p></td>
<td width="6%"></td>
<td width="82%">


<p>some syscall failed</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="3%">


<p><b>11</b></p></td>
<td width="6%"></td>
<td width="82%">


<p>bad usage : command line options and arguments coul not
be parsed</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="3%">


<p><b>12</b></p></td>
<td width="6%"></td>
<td width="82%">


<p>bad repo version, repo need to be cleaned, e.g. with
<b>git clean -ffdx</b></p></td></tr>
</table>

<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">lcollect</p>

<h2>FILES
<a name="FILES"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">The files
<i>Lmakefile.py</i> or <i>Lmakefile/__init__.py</i> are
searched in the current dir and in parent dirs. If a single
one is found, this determines the root of the repo. If
several are found, the existence of an <i>LMAKE</i> dir is
checked. If a single one is found, this determines the root
of the repo. In other cases, <b>lcollect</b> will not
start.</p>

<h2>NOTES
<a name="NOTES"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em"><b>lcollect</b>
does not prune <i>open-lmake</i> internal book-keeping data.
Use <b>lmake_repair</b>(1) for that.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:9%; margin-top: 1em"><b>lautodep</b>(1),
<b>lcache_repair</b>(1), <b>lcache_server</b>(1),
<b>lcheck_deps</b>(1), <b>lcodec_repair</b>(1),
<b>ldebug</b>(1), <b>ldecode</b>(1), <b>ldepend</b>(1),
<b>lencode</b>(1), <b>lforget</b>(1), <b>lmake</b>(1),
<b>lmark</b>(1), <b>lmake_repair</b>(1),
<b>lmake_server</b>(1), <b>lrun_cc</b>(1), <b>lshow</b>(1),
<b>ltarget</b>(1), <b>xxhsum</b>(1)</p>

<p style="margin-left:9%; margin-top: 1em">The python
module <b>lmake</b>.</p>

<p style="margin-left:9%; margin-top: 1em">The full
<i>open-lmake</i> documentation in
<i>&lt;open-lmake-installation-dir&gt;/docs/index.html</i>.</p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">Copyright &copy;
2023-2026, Doliam. This file is part of
<i>open-lmake</i>.</p>


<p style="margin-left:9%; margin-top: 1em"><i>open-lmake</i>
is free software; you can redistribute it and/or modify it
under the terms of the GNU General Public License as
published by the Free Software Foundation, version 3 of the
License.</p>


<p style="margin-left:9%; margin-top: 1em"><i>open-lmake</i>
is distributed in the hope that it will be useful, but
WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
GNU General Public License for more details.</p>

<p style="margin-left:9%; margin-top: 1em">You should have
received a copy of the GNU General Public License along with
this program. If not, see
<i>http://www.gnu.org/licenses/</i>.</p>
<hr>
</body>
</html>
